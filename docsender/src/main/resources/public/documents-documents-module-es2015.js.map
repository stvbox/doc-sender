{"version":3,"sources":["./src/app/documents/document-extend/document-extend.component.ts","./src/app/documents/document-extend/document-extend.component.html","./src/app/documents/document-list/document-list.component.ts","./src/app/documents/document-list/document-list.component.html","./src/app/documents/document.service.ts","./src/app/documents/document/document.component.ts","./src/app/documents/document/document.component.html","./src/app/documents/documents-routing.module.ts","./src/app/documents/documents.module.ts"],"names":[],"mappings":"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","file":"documents-documents-module-es2015.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormControl, FormBuilder, FormGroup } from '@angular/forms';\nimport { DocumentService } from '../document.service';\nimport { takeUntil, catchError } from 'rxjs/operators';\nimport { BaseComponent } from '../../common/BaseComponent';\nimport { never } from 'rxjs';\nimport { isNil } from 'lodash';\n\ninterface FormError {\n\tcode: String;\n}\n\n@Component({\n\tselector: 'document',\n\ttemplateUrl: './document-extend.component.html',\n\tstyleUrls: ['./document-extend.component.scss']\n})\nexport class DocumentExtendComponent extends BaseComponent implements OnInit {\n\tform: FormGroup;\n\tsentState: boolean;\n\tbusyState: boolean;\n\terrors = {};\n\n\tconstructor(\n\t\tprivate fb: FormBuilder,\n\t\tprivate documentSvc: DocumentService,\n\t) {\n\t\tsuper();\n\t}\n\n\tngOnInit(): void {\n\t\tthis.form = this.fb.group({\n\t\t\textend: [],\n\t\t\tdescription: [],\n\t\t});\n\t}\n\n\tsendDocument() {\n\t\tthis.busyState = true;\n\t\tconst attributes = { ...this.form.value };\n\t\tconst documentType = 'extend';\n\t\tthis.documentSvc.postExtendDocument({ attributes, documentType }).pipe(\n\t\t\tcatchError((errors) => {\n\t\t\t\tthis.busyState = false;\n\t\t\t\tthis.applyErrors(errors);\n\t\t\t\tthrow (errors);\n\t\t\t}),\n\t\t\ttakeUntil(this.unsubscribe),\n\t\t).subscribe((result) => {\n\t\t\tthis.busyState = false;\n\t\t\tthis.sentState = true;\n\t\t\tthis.applyErrors(null);\n\t\t});\n\t}\n\n\tapplyErrors(errors: Array<FormError>) {\n\n\t\tif (isNil(errors)) {\n\t\t\tthis.errors = {};\n\t\t\treturn;\n\t\t}\n\n\t\tthis.errors = errors.reduce((memo, error) => {\n\t\t\tconst errorCode = error.code.split('_')[1];\n\t\t\tmemo[errorCode] = true;\n\t\t\treturn memo;\n\t\t}, {});\n\n\t}\n\n}\n","<div class=\"d-flex\">\n\t<div class=\"container\">\n\t\t<div class=\"row\">\n\t\t\t<div class=\"col\">\n\t\t\t\t<div [formGroup]=\"form\"\n\t\t\t\t\t class=\"card\">\n\t\t\t\t\t<div class=\"card-header\">\n\t\t\t\t\t\tФорма простого документа для примера\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"card-body\">\n\t\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t\t<label for=\"extendField\">Дополнительное поле</label>\n\t\t\t\t\t\t\t<input formControlName=\"extend\"\n\t\t\t\t\t\t\t\t   [ngClass]=\"{ 'is-invalid': errors['extend'] }\"\n\t\t\t\t\t\t\t\t   type=\"email\"\n\t\t\t\t\t\t\t\t   class=\"form-control\"\n\t\t\t\t\t\t\t\t   id=\"extendField\"\n\t\t\t\t\t\t\t\t   aria-describedby=\"extendHelp\">\n\t\t\t\t\t\t\t<small id=\"extend\"\n\t\t\t\t\t\t\t\t   class=\"form-text text-muted\">Поле расширяющее базовую сущьность.</small>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t\t<label for=\"exampleFormControlTextarea\">Описание</label>\n\t\t\t\t\t\t\t<textarea formControlName=\"description\"\n\t\t\t\t\t\t\t\t\t  [ngClass]=\"{ 'is-invalid': errors['description'] }\"\n\t\t\t\t\t\t\t\t\t  class=\"form-control is-invalid\"\n\t\t\t\t\t\t\t\t\t  id=\"exampleFormControlTextarea\"\n\t\t\t\t\t\t\t\t\t  rows=\"3\"></textarea>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<button *ngIf=\"!this.busyState\"\n\t\t\t\t\t\t\t\t(click)=\"sendDocument()\">отправить</button>\n\t\t\t\t\t\t<img *ngIf=\"this.busyState\"\n\t\t\t\t\t\t\t src=\"/assets/images/svg/spinner.svg\"\n\t\t\t\t\t\t\t alt=\"Загрузка...\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n","import { Component, OnInit } from '@angular/core';\r\nimport { takeUntil, switchMap, map, filter } from 'rxjs/operators';\r\nimport { BaseComponent } from '../../common/BaseComponent';\r\nimport { DocumentService } from '../document.service';\r\nimport { Subject } from 'rxjs';\r\nimport { isNil } from 'lodash';\r\n\r\nconst PAGE_SIZE = 5;\r\n\r\ninterface Pagedocument {\r\n\tdocuments: any[];\r\n\tpage: number;\r\n}\r\n\r\n@Component({\r\n\tselector: 'app-document-list',\r\n\ttemplateUrl: './document-list.component.html',\r\n\tstyleUrls: ['./document-list.component.scss'],\r\n})\r\nexport class DocumentListComponent extends BaseComponent implements OnInit {\r\n\tcurrentPage: number = 0;\r\n\tdocuments: any[] = [];\r\n\tdocumentsPage: Subject<number> = new Subject();\r\n\r\n\tconstructor(private documentSvc: DocumentService) {\r\n\t\tsuper();\r\n\t}\r\n\tngOnInit(): void {\r\n\t\tthis.documentsPage.pipe(\r\n\t\t\tswitchMap((page) => this.documentSvc.getDocuments(page)),\r\n\t\t\tfilter(({ data }) => data?.length),\r\n\t\t\ttakeUntil(this.unsubscribe),\r\n\t\t).subscribe((response) => {\r\n\t\t\tconst { data: documents, pageNum: page } = response;\r\n\t\t\tthis.currentPage = page;\r\n\t\t\tconst offset = PAGE_SIZE * page;\r\n\t\t\tfor (let i = 0; i < PAGE_SIZE; i++) {\r\n\t\t\t\tthis.documents[offset + i] = documents[i];\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.documentsPage.next(this.currentPage);\r\n\t}\r\n\r\n\tnextPage() {\r\n\t\tthis.documentsPage.next(this.currentPage + 1);\r\n\t}\r\n}\r\n","<table class=\"table table-bordered\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th scope=\"col\">#</th>\n\t\t\t<th scope=\"col\">Дата</th>\n\t\t\t<th scope=\"col\">Описание</th>\n\t\t\t<th scope=\"col\">Статус</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr *ngFor=\"let document of documents\">\n\t\t\t<th scope=\"row\">{{ document.id }}</th>\n\t\t\t<td>{{ document.created }}</td>\n\t\t\t<td>{{ document.description }}</td>\n\t\t\t<td>{{ document.status }}</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<div>\n\t<button (click)=\"nextPage()\">показать еще</button>\n</div>\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpXsrfTokenExtractor, HttpHeaders, HttpParams } from '@angular/common/http';\nimport { map, catchError, tap } from 'rxjs/operators';\nimport { of } from 'rxjs';\nimport { BaseDocument } from './BaseDocument';\nimport { Response } from '../common/response';\n\ninterface Options {\n\theaders?: HttpHeaders | {\n\t\t[header: string]: string | string[];\n\t};\n\tobserve: 'response';\n\tparams?: HttpParams | {\n\t\t[param: string]: string | string[];\n\t};\n\treportProgress?: boolean;\n\tresponseType?: 'json';\n\twithCredentials?: boolean;\n};\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class DocumentService {\n\tconstructor(private http: HttpClient) { }\n\n\tgetDocuments(page: number) {\n\t\tconst params: Options = {\n\t\t\tobserve: 'response',\n\t\t\tresponseType: 'json',\n\t\t\tparams: {\n\t\t\t\tpage: String(page)\n\t\t\t}\n\t\t};\n\t\treturn this.http.get<Response<any>>('/api/document/get-list', params).pipe(\n\t\t\ttap((response) => console.log(response)),\n\t\t\tcatchError((error) => {\n\t\t\t\tconsole.error(error);\n\t\t\t\treturn of(null);\n\t\t\t}),\n\t\t\tmap((response) => response.body),\n\t\t);\n\t}\n\n\tpostDocument(document: BaseDocument) {\n\t\treturn this.http.post<Response<any>>('/api/document/post', document).pipe(\n\t\t\tcatchError((error) => {\n\t\t\t\tconsole.error(error);\n\t\t\t\treturn of(null);\n\t\t\t}),\n\t\t\tmap((response) => response.data),\n\t\t);\n\t}\n\n\tpostExtendDocument(document: BaseDocument) {\n\t\treturn this.http.post<Response<any>>('/api/extend/post', document).pipe(\n\t\t\tcatchError((error) => {\n\t\t\t\tconsole.error(error);\n\t\t\t\treturn of(null);\n\t\t\t}),\n\t\t\tmap((response) => {\n\t\t\t\tif (response?.data?.errors) {\n\t\t\t\t\tthrow (response.data.errors);\n\t\t\t\t}\n\t\t\t\treturn response?.data;\n\t\t\t}),\n\t\t);\n\t}\n\n}\n","import { Component, OnInit } from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport { DocumentService } from '../document.service';\nimport { takeUntil } from 'rxjs/operators';\nimport { BaseComponent } from '../../common/BaseComponent';\nimport { TestService } from '../test.service';\n\n@Component({\n\tselector: 'document',\n\ttemplateUrl: './document.component.html',\n\tstyleUrls: ['./document.component.scss'],\n})\nexport class DocumentComponent extends BaseComponent implements OnInit {\n\n\tdescriptionText: FormControl = new FormControl();\n\n\tconstructor(private documentSvc: DocumentService) {\n\t\tsuper();\n\t}\n\n\tngOnInit(): void {\n\n\t}\n\n\tsendDocument() {\n\t\tconst attributes = { description: this.descriptionText.value };\n\t\tconst documentType = 'simple';\n\t\tthis.documentSvc.postDocument({ attributes, documentType }).pipe(\n\t\t\ttakeUntil(this.unsubscribe),\n\t\t).subscribe((result) => {\n\t\t\tconsole.log(result);\n\t\t});\n\t}\n\n}\n","<div class=\"d-flex\">\n\t<div class=\"container\">\n\t\t<div class=\"row\">\n\t\t\t<div class=\"col\">\n\t\t\t\t<div class=\"card\">\n\t\t\t\t\t<div class=\"card-header\">\n\t\t\t\t\t\tФорма простого документа для примера\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"card-body\">\n\t\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t\t<label for=\"exampleFormControlTextarea1\">Описание</label>\n\t\t\t\t\t\t\t<textarea [formControl]=\"descriptionText\"\n\t\t\t\t\t\t\t\t\t  class=\"form-control\"\n\t\t\t\t\t\t\t\t\t  id=\"exampleFormControlTextarea1\"\n\t\t\t\t\t\t\t\t\t  rows=\"3\"></textarea>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<button (click)=\"sendDocument()\" >отправить</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { DocumentComponent } from './document/document.component';\nimport { DocumentExtendComponent } from './document-extend/document-extend.component';\nimport { DocumentListComponent } from './document-list/document-list.component';\n\nconst routes: Routes = [\n\t{ path: '', component: DocumentListComponent },\n\t{ path: 'simple', component: DocumentComponent },\n\t{ path: 'extend', component: DocumentExtendComponent },\n];\n\n@NgModule({\n\timports: [RouterModule.forChild(routes)],\n\texports: [RouterModule]\n})\nexport class DocumentsRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { DocumentsRoutingModule } from './documents-routing.module';\nimport { DocumentComponent } from './document/document.component';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { DocumentExtendComponent } from './document-extend/document-extend.component';\nimport { DocumentService } from './document.service';\nimport { HttpClientModule, HttpClientXsrfModule } from '@angular/common/http';\nimport { TestService } from './test.service';\nimport { DocumentListComponent } from './document-list/document-list.component';\n\n\n@NgModule({\n\tdeclarations: [\n\t\tDocumentComponent,\n\t\tDocumentExtendComponent,\n\t\tDocumentListComponent,\n\t],\n\timports: [\n\t\tCommonModule,\n\t\tDocumentsRoutingModule,\n\t\tReactiveFormsModule,\n\t],\n\tproviders: [\n\t\tDocumentService\n\t],\n})\nexport class DocumentsModule { }\n"],"sourceRoot":"webpack:///"}